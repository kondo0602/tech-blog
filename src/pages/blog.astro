---
import { getCollection } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";
import PostCard from "@components/PostCard.astro";

const pageTitle = "Blog";
const allPosts = await getCollection("posts");
const sortedPosts = allPosts.sort((a, b) => {
  return (
    new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
  );
});
---

<BaseLayout title={pageTitle}>
  <ul class="flex flex-col gap-4">
    {
      sortedPosts.map((post) => (
        <li class="py-4">
          <PostCard
            pubDate={post.data.pubDate}
            url={`/posts/${post.slug}`}
            title={post.data.title}
            tags={post.data.tags}
            description={post.data.description}
          />
        </li>
      ))
    }
  </ul>
</BaseLayout>
